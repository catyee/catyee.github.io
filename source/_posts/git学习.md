---
title: git学习
date: 2018-07-20 09:24:24
tags: git
categories: 总结(git)
---
> 参考: https://git-scm.com/book/zh/v2

git有三种状态: 已提交(committed),已修改(modified),已暂存(staged)
已提交表示数据已经安全的保存在本地数据库中。
已修改表示修改了文件，但还没有保存在数据库中
已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。
##### 初次运行git前的配置
配置用户信息
```
    git config --global user.name"your name"
    git config --global user.email "your email"
```
**如果使用了--global选项该命令只会运行一次，如果想对特定项目使用不同的用户名与邮件地址可以去掉--global运行**

##### 获取git仓库
两种方式: 1. 在现有项目或目录下导入所有文件到Git
         2. 从一个服务器克隆一个现有的Git仓库

1. 在现有项目或目录下导入所有文件到Git
 - 首先进入项目输入 git init，此时项目里的文件还没有被追踪。
 - 如果文件夹非空,执行:
 ```
 git add *.c
 git add LICENSE
 git commit -m 'initial project version'
 ```
2. 克隆现有的仓库
   git clone [url]
 以上操作会把远程Git仓库中的每一个文件的每一个版本都拉取下来。
   git clone [url] [myResponsityName]       // 自定义仓库名
##### 检查当前文件状态
git status 
使用git status -s使输出格式更加紧凑

git add  添加内容到下一次提交中
如果git add之后重新修改了文件 需要重新git add一次 提交时才是最终修改的版本。

##### 忽略文件
创建.gitignore文件

##### 要查看已暂存和未暂存的修改
git diff 此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。

##### 提交更新
每次提交前，先用git status查看是不是已经全都暂存，然后再运行git commit 命令

##### 移除文件
- 在已跟踪清单中移除文件，可以手工在文件目录中删除文件，然后运行git rm记录此次移除文件的操作。
- 也可以使用 git rm [file] -f 强制删除 这样的数据不会被git恢复
- 如果仅仅只是想让文件保存在当前文件目录，但是想取消git对它的追踪可以使用 git rm --cached [file]

##### 查看提交历史
git log命令 按照时间顺序列出所有的更新，最近的更新排在上面。
git log -p 用来显示每次提交的内容差异
git log -2 显示最近两次提交
git log --stat 每次提交的简略的统计信息

##### 撤销操作
在任何一个阶段，你都有可能想要撤销某些操作。
- 有时候我们提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了，此时可以运行带有 --amend选项的提交命令尝试重新提交。
git commt --amend // 这条命令会覆盖掉上一次的提交
##### 取消暂存的文件
- 例如，你已经修改了两个文件并且想要将他们作为两次独立的修改提交，但是却意外地输入了git add *暂存了它们两个，如何只取消其中的一个呢？  
使用 git rest HEAD [file]

##### 撤销对文件的修改
如果你不想保留对于一个文件的修改，你该如何方便地撤销修改-将它还原成上次提交的样子(或者刚克隆完的样子，或者刚把它放入工作目录的样子)
使用git checkout --[file]
**需要注意的是: git checkout --[file]是一个危险的命令，你对那个文件所做的任何修改都会消失-你只是拷贝了另一个文件来覆盖它。除非你确实清楚不想要那个文件了，否则不要使用这个命令** 
记住，在git中任何已提交的东西几乎都是可以恢复的，甚至那些被删除的分支中的提交或者使用--amend选项覆盖的提交也可以恢复。然而，任何你未提交的东西丢失后很可能再也找不到了。

##### 远程仓库的使用
- 查看远程仓库
    git remote  会列出你指定的每一个远程服务器的简写。
    git remote -v 显示需要读写远程仓库使用的git保存的简写与其对应的URL
- 添加远程仓库
    git remote add [shortname] [url] 添加一个新的远程git仓库并指定一个简写
- 从远程仓库中抓取与拉取
  git fetch [remote-name]
  这个命令会访问远程仓库，从中拉取所有你还没有的数据，执行完毕后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。
  如果你使用了clone命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以"origin"为简写。所以，git fetch origin 会抓取克隆(或上一次抓取)后新推送的所有工作。必须注意 **git fetch命令会将数据拉取到你的本地仓库-它并不会自动合并或者修改你当前的工作。当准备好时，你必须手动将其合并入你的工作。**

  **如果你有一个分支设置为追踪一个远程分支，可以使用git pull命令来自动的抓取然后合并远程分支到当前分支。** 

##### 推送到远程仓库
git push [remote-name] [branch-name]
只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效，当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝，你必须先把他们的工作拉取下来并将其合并进你的工作后才能推送。

##### 查看远程仓库
git remote show [remote-name]
##### 远程仓库的移除与重命名
如果想要重命名引用的名字可以运行git remote rename [originShortName] [newShortName]去修改一个远程仓库的简写名。值得注意的是这同样也会修改你的远程分支名字

可以使用git remote rm [shortName] 移除一个远程仓库

##### 打标签
- 列出标签 git tag
  也可以使用特定的模式查找标签，例如只查看1.8.5系列 可以运行 git tag -l 'v1.8.5'
- 创建标签
  git使用两种主要类型的标签: **轻量标签与附注标签**
  一个轻量标签很像一个不会改变的分支——它只是一个特定提交的引用。
  然而，附注标签是存储在Git数据库中的一个完整对象。它们是可以被校验的；其中包括打标签者的名字，电子邮件地址，日期时间，还有一个标签信息，并且可以使用GNU Privacy Guard(GPG)签名与验证。通常建议创建附注标签，这样就可以拥有以上所有信息。但是如果你只是想用一个临时的标签或者因为某些原因不想保存那些信息，轻量标签也是可用的。
- 

